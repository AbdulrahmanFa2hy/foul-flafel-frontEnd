import{u as b,a as g,b as y,r as l,j as e,M as j,c as S,d as v,e as N}from"./index-DX1FWjf4.js";function w({onClose:a}){const{t:r}=b(),u=g(),{loading:i,error:o,currentShift:x}=y(t=>t.shift),[s,h]=l.useState(""),[n,d]=l.useState("");if(!x)return null;const c=async t=>{if(t&&t.preventDefault(),!s||s<0){d(r("endShift.balanceError"));return}try{await u(N({endBalance:Number(s)})).unwrap(),a()}catch(f){console.error("Error ending shift:",f)}},m=t=>{h(t.target.value),n&&d("")},p=t=>{t.key==="Enter"&&(t.preventDefault(),c())};return e.jsx(j,{title:r("endShift.title"),onClose:a,size:"lg",children:e.jsx("div",{className:"p-2 sm:p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[(o||n)&&e.jsxs("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm flex items-center gap-2",children:[e.jsx(S,{}),o||n]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",value:s,onChange:m,onKeyDown:p,className:`w-full px-4 py-4 text-2xl font-bold border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-center ${n?"border-red-500":"border-gray-300"}`,placeholder:"0.00",min:"0",step:"0.01",required:!0,autoFocus:!0}),n&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:r("endShift.instruction")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-6 py-3 rounded-lg text-gray-700 font-medium border border-gray-300 hover:bg-gray-50 transition-colors",onClick:a,children:r("common.cancel")}),e.jsxs("button",{type:"button",onClick:c,disabled:i,className:"px-6 py-3 rounded-lg text-white font-medium bg-red-600 hover:bg-red-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(v,{}),r(i?"endShift.ending":"endShift.endShift")]})]})]})})})}export{w as default};
