import{u as j,a as v,b as N,r as l,G as m,j as t,M as E,H as w,I as B}from"./index-COiNFfFw.js";function F({onClose:d}){const{t:s,i18n:h}=j(),p=h.language==="ar",r=v(),{loading:c,error:g,hasActiveShift:u}=N(n=>n.shift),[o,x]=l.useState(""),[a,i]=l.useState("");l.useEffect(()=>{r(m())},[r]),l.useEffect(()=>{u&&d()},[u,d]);const b=async n=>{var f;if(n.preventDefault(),!o||o<=0){i(s("startShift.balanceError"));return}try{await r(w({startBalance:Number(o)})).unwrap()}catch(e){console.error("Error starting shift:",e),(e==null?void 0:e.statusCode)===401||(e==null?void 0:e.status)==="fail"?(f=e.message)!=null&&f.includes("Unauthorized")?i("You don't have permission to start shifts. Please contact your administrator."):i(e.message||"Failed to start shift. Please try again."):i("Failed to start shift. Please check your connection and try again.")}},y=n=>{x(n.target.value),a&&i(""),g&&r(m())},S=()=>{r(B())};return t.jsx(E,{title:s("startShift.title"),onClose:null,showCloseButton:!1,children:t.jsxs("div",{className:"p-6",dir:p?"rtl":"ltr",children:[t.jsx("div",{className:"text-center mb-6",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("startShift.welcome")})}),t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a&&t.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-md text-sm",children:a}),t.jsxs("div",{children:[t.jsx("input",{type:"number",value:o,onChange:y,className:`px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-800/50 focus:border-primary-800 w-full ${a?"border-red-500":"border-gray-300"}`,placeholder:s("startShift.enterBalance"),min:"0",step:"0.01",required:!0,disabled:c}),a&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:a}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s("startShift.balanceInstruction")})]}),t.jsxs("div",{className:"pt-4 space-y-3",children:[t.jsx("button",{type:"submit",disabled:c,className:"w-full px-4 py-2 rounded-md text-white font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 bg-primary-800 hover:bg-primary-900 focus:ring-primary-800/50 disabled:opacity-50",children:s(c?"startShift.starting":"startShift.startShift")}),t.jsx("button",{type:"button",onClick:S,className:"w-full px-4 py-2 rounded-md text-gray-700 font-medium border border-gray-300 hover:bg-gray-50 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50",children:s("sidebar.logout")})]})]})]})})}export{F as default};
