import{u as N,a as k,r as m,V as u,a1 as w,a2 as B,U as E,j as a,M as S}from"./index--F7GMXIP.js";const f=[{name:"Blue",value:"#3B82F6",bgClass:"bg-blue-500"},{name:"Green",value:"#10B981",bgClass:"bg-green-500"},{name:"Purple",value:"#8B5CF6",bgClass:"bg-purple-500"},{name:"Pink",value:"#EC4899",bgClass:"bg-pink-500"},{name:"Orange",value:"#F59E0B",bgClass:"bg-orange-500"},{name:"Red",value:"#EF4444",bgClass:"bg-red-500"},{name:"Teal",value:"#14B8A6",bgClass:"bg-teal-500"},{name:"Indigo",value:"#6366F1",bgClass:"bg-indigo-500"},{name:"Yellow",value:"#EAB308",bgClass:"bg-yellow-500"},{name:"Gray",value:"#6B7280",bgClass:"bg-gray-500"}],D=({category:t,onClose:c})=>{var y;const{t:e,i18n:p}=N(),i=p.language==="ar",l=!!t,d=k(),[s,g]=m.useState({name:(t==null?void 0:t.name)||"",color:(t==null?void 0:t.color)||""}),[n,b]=m.useState(!1),x=m.useCallback(r=>{const{name:o,value:F}=r.target;g(j=>({...j,[o]:F}))},[]),C=m.useCallback(r=>{g(o=>({...o,color:r}))},[]),h=m.useCallback(()=>{g(r=>({...r,color:""}))},[]),v=m.useCallback(async r=>{if(r.preventDefault(),!s.name.trim()){u.error(e("forms.categoryForm.nameRequired"));return}b(!0);try{const o={name:s.name.trim()};s.color?o.color=s.color:o.color="",l?(await d(w({categoryId:t._id,categoryData:o})).unwrap(),u.success(e("forms.categoryForm.categoryUpdated"))):(await d(B(o)).unwrap(),u.success(e("forms.categoryForm.categoryCreated"))),d(E()),c()}catch(o){u.error(o.message||e(l?"forms.categoryForm.updateFailed":"forms.categoryForm.createFailed"))}finally{b(!1)}},[s,l,t,d,c,e]);return a.jsx(S,{title:e(l?"forms.categoryForm.editCategory":"forms.categoryForm.addCategory"),onClose:c,size:"md",children:a.jsx("div",{className:"space-y-4",dir:i?"rtl":"ltr",children:a.jsxs("form",{onSubmit:v,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("forms.categoryForm.categoryName")," *"]}),a.jsx("input",{type:"text",name:"name",value:s.name,onChange:x,className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-800/50 focus:border-primary-800 w-full",placeholder:e("forms.categoryForm.enterCategoryName"),required:!0,disabled:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("forms.categoryForm.categoryColor")}),a.jsxs("div",{className:"space-y-3",children:[s.color&&a.jsxs("div",{className:`flex items-center gap-2 p-2 bg-gray-50 rounded-md ${i?"flex-row-reverse":""}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300",style:{backgroundColor:s.color}}),a.jsxs("span",{className:"text-sm text-gray-600",children:[e("forms.categoryForm.selected"),":"," ",((y=f.find(r=>r.value===s.color))==null?void 0:y.name)||e("forms.categoryForm.custom")]}),a.jsx("button",{type:"button",onClick:h,className:`text-xs text-red-600 hover:text-red-800 ${i?"mr-auto":"ml-auto"}`,disabled:n,children:e("forms.categoryForm.remove")})]}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:f.map(r=>a.jsx("button",{type:"button",onClick:()=>C(r.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 ${s.color===r.value?"border-gray-800 ring-2 ring-gray-300":"border-gray-300 hover:border-gray-400"} ${r.bgClass}`,title:r.name,disabled:n},r.value))}),a.jsx("p",{className:"text-xs text-gray-500",children:e("forms.categoryForm.colorHelpText")})]})]}),a.jsxs("div",{className:`flex justify-end space-x-3 pt-4 border-t border-gray-200 ${i?"space-x-reverse":""}`,children:[a.jsx("button",{type:"button",className:"btn-outline",onClick:c,disabled:n,children:e("common.cancel")}),a.jsx("button",{type:"submit",disabled:n||!s.name.trim(),className:"px-4 py-2 rounded-md text-white font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 bg-primary-800 hover:bg-primary-800 focus:ring-primary-800/50 disabled:opacity-50 disabled:cursor-not-allowed",children:e(n?l?"forms.categoryForm.updating":"forms.categoryForm.creating":l?"forms.categoryForm.updateCategory":"forms.categoryForm.createCategory")})]})]})})})};export{D as default};
